<html>
  <head>
    <link rel="stylesheet" href="css/Burner.min.css" />
    <link rel="stylesheet" href="css/Flora.min.css" />
    <script src='scripts/Burner.min.js' type="text/javascript"></script>
    <script src='scripts/Flora.min.js' type="text/javascript"></script>
  </head>
  <body>
    <input type='text' id='txtFirstName' placeholder='First name' />
    <input type='text' id='txtLastName' placeholder='Last name' />
    <input type='button' id='btnGetName' value='Save' />
    <script src='http://localhost:1337/socket.io/socket.io.js'></script>
    <script type="text/javascript">
      var socket = io.connect('http://localhost:1337'),
        fName = document.getElementById('txtFirstName'),
        lName = document.getElementById('txtLastName'),
        btn = document.getElementById('btnGetName');

        btn.addEventListener('click', function() {
          socket.emit('setName', {firstName: fName.value, lastName: lName.value});
          return false;
        });

        socket.on('dataSet', function(data) {
          alert('data set: ' + data.id);
        });
    </script>
    <script type="text/javascript">

      var viewportSize = Burner.System.getWindowSize();

      Burner.System.init(function() {

        var agent = this.add('Agent', {
          beforeStep: function() {
            if (agent.location.y > viewportSize.height - 100) {
              socket.emit('setData', {id: agent.id, velocityY: agent.velocity.y});
              Burner.System.destroyItem(agent);
            }
          }
        });

      });

    </script>
  </body>
</html>
