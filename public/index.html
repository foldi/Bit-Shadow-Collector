<html>
  <head>
    <link rel="stylesheet" href="css/Burner.min.css" />
    <link rel="stylesheet" href="css/Flora.min.css" />
    <script src='scripts/Burner.min.js' type="text/javascript"></script>
    <script src='scripts/Flora.min.js' type="text/javascript"></script>
  </head>
  <body>
    <script src='http://localhost:1337/socket.io/socket.io.js'></script>
    <script type="text/javascript">
      var socket = io.connect('http://localhost:1337');
      socket.on('dataSet', function(data) {
        alert('data set: ' + data.id);
      });
    </script>
    <script type="text/javascript">

      var viewportSize = Burner.System.getWindowSize();

      Burner.System.init(function() {

        // provide a callback after frame count exceeds limit

        var agent = this.add('Agent', {
          beforeStep: function() {
            if (agent.location.y > viewportSize.height - 100) {
              socket.emit('setData', {id: agent.id, velocityY: agent.velocity.y});
              Burner.System.destroyItem(agent);
            }
          }
        });

      });

    </script>
  </body>
</html>
